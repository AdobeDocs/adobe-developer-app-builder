{"version":3,"sources":["webpack://project-firefly/./src/pages/resources/journaling-events/lesson1.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"mRAQaA,EAAe,GACtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGX,IAFFC,EAEC,EAFDA,WACGC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,mDADR,qDAGA,mEACA,oBACE,eAAIC,WAAW,MAAf,4DACA,eAAIA,WAAW,MAAf,wCACA,eAAIA,WAAW,MAAf,gBACA,eAAIA,WAAW,MAAf,sCAEF,eACE,GAAM,2DADR,4DAGA,uVAEA,wGACF,cAAGA,WAAW,IACR,KAAQ,8BADd,QADE,+BAIuB,uBAAYA,WAAW,KAAvB,sBAJvB,2BAIgH,uBAAYA,WAAW,KAAvB,iBAJhH,2BAKA,eACE,GAAM,sCADR,uCAGA,iJACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,mDAIL,mEACF,cAAGA,WAAW,IACR,KAAQ,8BADd,UAGE,eACE,GAAM,yCADR,0CAGA,6DAA8C,cAAGA,WAAW,IACxD,KAAQ,4BADkC,QAA9C,yFAE0G,cAAGA,WAAW,IACpH,KAAQ,kGAD8F,UAG1G,eACE,GAAM,oCADR,qCAGA,sGAAuF,cAAGA,WAAW,IACjG,KAAQ,yBAD2E,sCAGvF,2BAAY,uBAAYA,WAAW,KAAvB,mBAAZ,qCACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,qyCA8CL,qEAAsD,uBAAYA,WAAW,KAAvB,kBAAtD,kEAAkL,uBAAYA,WAAW,KAAvB,8CAAlL,gDAAwT,uBAAYA,WAAW,KAAvB,4BAAxT,SAAqY,uBAAYA,WAAW,KAAvB,+BACrY,yLAKJJ,EAAWK,gBAAiB","file":"component---src-pages-resources-journaling-events-lesson-1-md-0614a5f2b55e445e287d.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/project-firefly/project-firefly/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"lesson-1-create-an-event-provider-using-firefly\"\n    }}>{`Lesson 1: Create an Event Provider using Firefly`}</h1>\n    <p>{`In this lesson, we will do the follow steps:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Create an event provider using Project Firefly template`}</li>\n      <li parentName=\"ul\">{`Register the App as event provider `}</li>\n      <li parentName=\"ul\">{`Fire Events`}</li>\n      <li parentName=\"ul\">{`Scheduling cron jobs with alarms`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"create-an-event-provider-using-project-firefly-template\"\n    }}>{`Create an event provider using Project Firefly template`}</h2>\n    <p>{`In this codelab, to provide an end to end solution, we need to have an event provider generating tons of events sending to journaling API, and the events provider need to be configurable to send x events/min to help user to test. so we choose to use OpenWhisk Alarms Package in Firefly application to create\ncron jobs. `}</p>\n    <p>{`First, let's create a new firefly App from template by follow the below codelab:\n`}<a parentName=\"p\" {...{\n        \"href\": \"../event-driven/lesson1.md\"\n      }}>{`here`}</a>{`\nplease make sure you add `}<inlineCode parentName=\"p\">{`I/O management API`}</inlineCode>{` in console and choose `}<inlineCode parentName=\"p\">{`publish-event`}</inlineCode>{` in the cli template. `}</p>\n    <h2 {...{\n      \"id\": \"register-the-app-as-event-provider\"\n    }}>{`Register the App as Event Provider`}</h2>\n    <p>{`Now we use cli to register the app as event provider, we need to install the Adobe I/O event cli plugin, simply run below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`npm install -g @adobe/aio-cli-plugin-events\n`}</code></pre>\n    <p>{`and then follow below codelab step by step:\n`}<a parentName=\"p\" {...{\n        \"href\": \"../event-driven/lesson2.md\"\n      }}>{`here`}</a></p>\n    <h2 {...{\n      \"id\": \"fire-events-and-set-up-consume-events\"\n    }}>{`Fire Events and set up consume Events`}</h2>\n    <p>{`Now we can set up fire event by follow `}<a parentName=\"p\" {...{\n        \"href\": \"../event-driven/index.md\"\n      }}>{`this`}</a>{` and make sure that you choose journaling API as the way to consume events by follow `}<a parentName=\"p\" {...{\n        \"href\": \"https://adobeio-codelabs-custom-events-adobedocs.project-helix.page/?src=/lessons/lesson4.html\"\n      }}>{`this`}</a></p>\n    <h2 {...{\n      \"id\": \"scheduling-cron-jobs-with-alarms\"\n    }}>{`Scheduling cron jobs with alarms`}</h2>\n    <p>{`Follow this codelab to automatically fire event by using runtime alarms package `}<a parentName=\"p\" {...{\n        \"href\": \"../cron-jobs/index.md\"\n      }}>{`Scheduling Cron Jobs with Alarms`}</a></p>\n    <p>{`Your `}<inlineCode parentName=\"p\">{`app.config.yaml`}</inlineCode>{` should look like this as below.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`application:\n  actions: actions\n  web: web-src\n  runtimeManifest:\n    packages:\n      my-app:\n        license: Apache-2.0\n        actions:\n          generic:\n            function: actions/generic/index.js\n            web: 'yes'\n            runtime: 'nodejs:14'\n            inputs:\n              LOG_LEVEL: debug\n            annotations:\n              require-adobe-auth: true\n              final: true\n          publish-events:\n            function: actions/publish-events/index.js\n            web: 'yes'\n            runtime: 'nodejs:14'\n            inputs:\n              LOG_LEVEL: debug\n              apiKey: $SERVICE_API_KEY\n              providerId: $PROVIDER_ID\n              eventCode: $EVENT_CODE\n              client_id: $CLIENT_ID\n              client_secret: $CLIENT_SECRET\n              technical_account_email: $TECH_ACCOUNT_EMAIL\n              technical_account_id: $TECH_ACCOUNT_ID\n              ims_org_id: $IMS_ORG_ID\n              private_key: $PRIVATE_KEY\n            annotations:\n              final: true\n        Triggers:\n          everyMin:\n            feed: /whisk.system/alarms/interval\n            inputs:\n              minutes: 1\n          rules:\n            everyMinRule:\n              trigger: everyMin\n              action: publish-events\n`}</code></pre>\n    <p>{`In order to test the action, you could execute `}<inlineCode parentName=\"p\">{`aio app deploy`}</inlineCode>{` in the VSCode terminal. Once the deployment is finished, run `}<inlineCode parentName=\"p\">{`aio rt action invoke your-app-name/generic`}</inlineCode>{`, and then verify its result and logs using `}<inlineCode parentName=\"p\">{`aio rt activation get ID`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`aio rt activation logs ID`}</inlineCode></p>\n    <p>{`If successful, the event provider should automatically send the events, you should be able to use postman or curl to verify the journaling API to receive events. `}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}