(self.webpackChunkproject_firefly=self.webpackChunkproject_firefly||[]).push([[247],{95189:function(e,n,t){"use strict";t.r(n),t.d(n,{_frontmatter:function(){return s},default:function(){return m}});var a=t(22122),o=t(19756),i=(t(15007),t(64983)),r=t(99536),l=["components"],s={},d={_frontmatter:s},p=r.Z;function m(e){var n=e.components,t=(0,o.Z)(e,l);return(0,i.mdx)(p,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"lesson-1-create-an-event-provider-using-firefly"},"Lesson 1: Create an Event Provider using Firefly"),(0,i.mdx)("p",null,"In this lesson, we will do the follow steps:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Create an event provider using Project Firefly template"),(0,i.mdx)("li",{parentName:"ul"},"Register the App as event provider "),(0,i.mdx)("li",{parentName:"ul"},"Fire Events"),(0,i.mdx)("li",{parentName:"ul"},"Scheduling cron jobs with alarms")),(0,i.mdx)("h2",{id:"create-an-event-provider-using-project-firefly-template"},"Create an event provider using Project Firefly template"),(0,i.mdx)("p",null,"In this codelab, to provide an end to end solution, we need to have an event provider generating tons of events sending to journaling API, and the events provider need to be configurable to send x events/min to help user to test. so we choose to use OpenWhisk Alarms Package in Firefly application to create\ncron jobs. "),(0,i.mdx)("p",null,"First, let's create a new firefly App from template by follow the below codelab:\n",(0,i.mdx)("a",{parentName:"p",href:"../event-driven/lesson1.md"},"here"),"\nplease make sure you add ",(0,i.mdx)("inlineCode",{parentName:"p"},"I/O management API")," in console and choose ",(0,i.mdx)("inlineCode",{parentName:"p"},"publish-event")," in the cli template. "),(0,i.mdx)("h2",{id:"register-the-app-as-event-provider"},"Register the App as Event Provider"),(0,i.mdx)("p",null,"Now we use cli to register the app as event provider, we need to install the Adobe I/O event cli plugin, simply run below:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"npm install -g @adobe/aio-cli-plugin-events\n")),(0,i.mdx)("p",null,"and then follow below codelab step by step:\n",(0,i.mdx)("a",{parentName:"p",href:"../event-driven/lesson2.md"},"here")),(0,i.mdx)("h2",{id:"fire-events-and-set-up-consume-events"},"Fire Events and set up consume Events"),(0,i.mdx)("p",null,"Now we can set up fire event by follow ",(0,i.mdx)("a",{parentName:"p",href:"../event-driven/index.md"},"this")," and make sure that you choose journaling API as the way to consume events by follow ",(0,i.mdx)("a",{parentName:"p",href:"https://adobeio-codelabs-custom-events-adobedocs.project-helix.page/?src=/lessons/lesson4.html"},"this")),(0,i.mdx)("h2",{id:"scheduling-cron-jobs-with-alarms"},"Scheduling cron jobs with alarms"),(0,i.mdx)("p",null,"Follow this codelab to automatically fire event by using runtime alarms package ",(0,i.mdx)("a",{parentName:"p",href:"../cron-jobs/index.md"},"Scheduling Cron Jobs with Alarms")),(0,i.mdx)("p",null,"Your manifest file should look like this as below."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-yaml"},"packages:\n  __APP_PACKAGE__:\n    license: Apache-2.0\n    actions:\n      publish-events:\n        function: actions/publish-events/index.js\n        runtime: 'nodejs:14'\n        inputs:\n          LOG_LEVEL: debug\n          apiKey: $SERVICE_API_KEY\n          providerId: $PROVIDER_ID\n          eventCode: $EVENT_CODE\n          client_id: $CLIENT_ID\n          client_secret: $CLIENT_SECRET\n          technical_account_email: $TECH_ACCOUNT_EMAIL\n          technical_account_id: $TECH_ACCOUNT_ID\n          ims_org_id: $IMS_ORG_ID\n          private_key: $PRIVATE_KEY\n        annotations:\n          final: true\n    triggers:\n      everyMin:\n        feed: /whisk.system/alarms/interval\n        inputs:\n          minutes: 1\n    rules:\n      everyMinRule:\n        trigger: everyMin\n        action: publish-events\n")),(0,i.mdx)("p",null,"In order to test the action, you could execute ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app deploy")," in the VSCode terminal. Once the deployment is finished, run ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio rt action invoke your-app-name/generic"),", and then verify its result and logs using ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio rt activation get ID")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio rt activation logs ID")),(0,i.mdx)("p",null,"If successful, the event provider should automatically send the events, you should be able to use postman or curl to verify the journaling API to receive events. "))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-resources-journaling-events-lesson-1-md-f44da1559f8e244836cf.js.map