(self.webpackChunkproject_firefly=self.webpackChunkproject_firefly||[]).push([[8079],{52456:function(e,a,p){"use strict";p.r(a),p.d(a,{_frontmatter:function(){return r},default:function(){return c}});var t=p(22122),i=p(19756),o=(p(15007),p(64983)),n=p(99536),l=["components"],r={},s={_frontmatter:r},d=n.Z;function c(e){var a=e.components,p=(0,i.Z)(e,l);return(0,o.mdx)(d,(0,t.Z)({},s,p,{components:a,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"app-builder-application-tooling-lifecycle-event-hooks"},"App Builder application tooling lifecycle event hooks"),(0,o.mdx)("h2",{id:"sample-hooks-configuration"},"Sample hooks configuration"),(0,o.mdx)("p",null,"For example, pre and post hooks can be defined for the ",(0,o.mdx)("inlineCode",{parentName:"p"},"run"),", ",(0,o.mdx)("inlineCode",{parentName:"p"},"build")," and ",(0,o.mdx)("inlineCode",{parentName:"p"},"deploy")," commands in the app.config.yaml or ext.config.yaml file of your app. For the ",(0,o.mdx)("inlineCode",{parentName:"p"},"run"),", ",(0,o.mdx)("inlineCode",{parentName:"p"},"build")," and ",(0,o.mdx)("inlineCode",{parentName:"p"},"deploy")," commands, you can specify build and deploy script substitutes as well. For the ",(0,o.mdx)("inlineCode",{parentName:"p"},"run")," command, you can specify an additional ",(0,o.mdx)("inlineCode",{parentName:"p"},"serve-static")," script (to custom serve your web assets)."),(0,o.mdx)("h2",{id:"legacy-app-no-extensions"},"Legacy App (no extensions)"),(0,o.mdx)("p",null,"In the root of your app, you will have to add a ",(0,o.mdx)("inlineCode",{parentName:"p"},"hooks")," key in the ",(0,o.mdx)("inlineCode",{parentName:"p"},"app.config.yaml")," file, under the ",(0,o.mdx)("inlineCode",{parentName:"p"},"application")," key. Example:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"application:\n  hooks:\n    pre-app-run: echo pre-app-run\n")),(0,o.mdx)("p",null,"If you add extensions to a standalone app via ",(0,o.mdx)("inlineCode",{parentName:"p"},"aio app add extension"),", note that your ",(0,o.mdx)("inlineCode",{parentName:"p"},"app.config.yaml")," hooks will always run first, then your extension hooks in each ",(0,o.mdx)("inlineCode",{parentName:"p"},"ext.config.yaml")," will be run."),(0,o.mdx)("h2",{id:"app-with-extensions"},"App with Extensions"),(0,o.mdx)("p",null,"In your app extension folder (typically at ",(0,o.mdx)("inlineCode",{parentName:"p"},"src/EXTENSION_NAME"),"), find the ",(0,o.mdx)("inlineCode",{parentName:"p"},"ext.config.yaml")," file, and add in a ",(0,o.mdx)("inlineCode",{parentName:"p"},"hooks")," key. Example:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"hooks:\n  pre-app-run: echo pre-app-run\n")),(0,o.mdx)("h2",{id:"command-support"},"Command Support"),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"aio app run")," supports:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-yaml"},"hooks:\n  pre-app-run: echo pre-app-run\n  post-app-run: echo post-app-run\n  pre-app-build: echo pre-app-build\n  post-app-build: echo post-app-build\n  pre-app-deploy: echo pre-app-deploy\n  post-app-deploy: echo post-app-deploy\n  build-actions: echo build-actions\n  deploy-actions: echo deploy-actions\n  build-static: echo build-static\n  serve-static: echo serve-static\n  pre-app-undeploy: echo pre-app-undeploy\n  post-app-undeploy: echo post-app-undeploy\n  undeploy-actions: echo undeploy-actions\n  undeploy-static: echo undeploy-static\n")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"aio app build")," supports:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-yaml"},"hooks:\n  pre-app-build: echo pre-app-build\n  post-app-build: echo post-app-build\n  build-actions: echo build-actions\n  build-static: echo build-static\n")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"aio app deploy")," supports:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-yaml"},"hooks:\n  pre-app-build: echo pre-app-build\n  post-app-build: echo post-app-build\n  pre-app-deploy: echo pre-app-deploy\n  post-app-deploy: echo post-app-deploy\n  build-actions: echo build-actions\n  build-static: echo build-static\n  deploy-actions: echo deploy-actions\n  deploy-static: echo deploy-static\n")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"aio app undeploy")," supports:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-yaml"},"hooks:\n  pre-app-undeploy: echo pre-app-undeploy\n  post-app-undeploy: echo post-app-undeploy\n  undeploy-actions: echo undeploy-actions\n  undeploy-static: echo undeploy-static\n")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"aio app test")," supports:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-yaml"},"hooks:\n  test: echo this is your custom test runner\n")),(0,o.mdx)("h2",{id:"use-cases"},"Use cases"),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"aio app run")," hooks:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"manage additional local development tooling that is not managed by the out-of-the-box flow")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"aio app build")," ",(0,o.mdx)("strong",{parentName:"p"},"build-static")," and ",(0,o.mdx)("strong",{parentName:"p"},"build-actions")," hooks:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"build actions to include static files with the action zipfile (for templates like in server-side rendering)"),(0,o.mdx)("li",{parentName:"ul"},"build the web assets with a different bundler and configuration, for example webpack")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"aio app deploy")," ",(0,o.mdx)("strong",{parentName:"p"},"deploy-static")," and ",(0,o.mdx)("strong",{parentName:"p"},"deploy-actions")," hooks:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"support additional deployment steps (e.g. deploy to multiple servers or locations)")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"aio app undeploy")," ",(0,o.mdx)("strong",{parentName:"p"},"undeploy-static")," and ",(0,o.mdx)("strong",{parentName:"p"},"undeploy-actions")," hooks:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"support additional un-deployment steps (e.g. un-deploy from multiple servers or locations)")),(0,o.mdx)("p",null,(0,o.mdx)("inlineCode",{parentName:"p"},"aio app test")," ",(0,o.mdx)("strong",{parentName:"p"},"test")," hook:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"support a custom test runner for your app or extension")),(0,o.mdx)("h2",{id:"hooks-flow"},"Hooks flow"),(0,o.mdx)("p",null,"The following diagram illustrates how your custom hooks will be executed within the application via the various commands:"),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"145.31249999999997%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/35137a2449e13c61f7075bf368b161a5/cb523/aio-app-run.webp 320w","/project-firefly/static/35137a2449e13c61f7075bf368b161a5/797b9/aio-app-run.webp 640w","/project-firefly/static/35137a2449e13c61f7075bf368b161a5/4b075/aio-app-run.webp 1280w","/project-firefly/static/35137a2449e13c61f7075bf368b161a5/018aa/aio-app-run.webp 1835w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/35137a2449e13c61f7075bf368b161a5/72799/aio-app-run.png 320w","/project-firefly/static/35137a2449e13c61f7075bf368b161a5/6af66/aio-app-run.png 640w","/project-firefly/static/35137a2449e13c61f7075bf368b161a5/21b4d/aio-app-run.png 1280w","/project-firefly/static/35137a2449e13c61f7075bf368b161a5/dc94e/aio-app-run.png 1835w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/35137a2449e13c61f7075bf368b161a5/21b4d/aio-app-run.png",alt:"aio-app-run lifecycle",title:"aio-app-run lifecycle",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1137px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"114.375%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/d2e104785599f21056ffb10e5cf34f01/cb523/aio-app-build.webp 320w","/project-firefly/static/d2e104785599f21056ffb10e5cf34f01/797b9/aio-app-build.webp 640w","/project-firefly/static/d2e104785599f21056ffb10e5cf34f01/1631d/aio-app-build.webp 1137w"],sizes:"(max-width: 1137px) 100vw, 1137px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/d2e104785599f21056ffb10e5cf34f01/72799/aio-app-build.png 320w","/project-firefly/static/d2e104785599f21056ffb10e5cf34f01/6af66/aio-app-build.png 640w","/project-firefly/static/d2e104785599f21056ffb10e5cf34f01/000c7/aio-app-build.png 1137w"],sizes:"(max-width: 1137px) 100vw, 1137px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/d2e104785599f21056ffb10e5cf34f01/000c7/aio-app-build.png",alt:"aio-app-build lifecycle",title:"aio-app-build lifecycle",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1137px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"205.93749999999997%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/963f71d986927ba071ea6a53a8778900/cb523/aio-app-deploy.webp 320w","/project-firefly/static/963f71d986927ba071ea6a53a8778900/797b9/aio-app-deploy.webp 640w","/project-firefly/static/963f71d986927ba071ea6a53a8778900/1631d/aio-app-deploy.webp 1137w"],sizes:"(max-width: 1137px) 100vw, 1137px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/963f71d986927ba071ea6a53a8778900/72799/aio-app-deploy.png 320w","/project-firefly/static/963f71d986927ba071ea6a53a8778900/6af66/aio-app-deploy.png 640w","/project-firefly/static/963f71d986927ba071ea6a53a8778900/000c7/aio-app-deploy.png 1137w"],sizes:"(max-width: 1137px) 100vw, 1137px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/963f71d986927ba071ea6a53a8778900/000c7/aio-app-deploy.png",alt:"aio-app-deploy lifecycle",title:"aio-app-deploy lifecycle",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"107.5%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/ef110619eb7830180cf9a2388818bcf3/cb523/aio-app-undeploy.webp 320w","/project-firefly/static/ef110619eb7830180cf9a2388818bcf3/797b9/aio-app-undeploy.webp 640w","/project-firefly/static/ef110619eb7830180cf9a2388818bcf3/4b075/aio-app-undeploy.webp 1280w","/project-firefly/static/ef110619eb7830180cf9a2388818bcf3/4dbb0/aio-app-undeploy.webp 1302w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/ef110619eb7830180cf9a2388818bcf3/72799/aio-app-undeploy.png 320w","/project-firefly/static/ef110619eb7830180cf9a2388818bcf3/6af66/aio-app-undeploy.png 640w","/project-firefly/static/ef110619eb7830180cf9a2388818bcf3/21b4d/aio-app-undeploy.png 1280w","/project-firefly/static/ef110619eb7830180cf9a2388818bcf3/5f652/aio-app-undeploy.png 1302w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/ef110619eb7830180cf9a2388818bcf3/21b4d/aio-app-undeploy.png",alt:"aio-app-undeploy lifecycle",title:"aio-app-undeploy lifecycle",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-app-hooks-md-ad6f30487b4c9a4e4612.js.map