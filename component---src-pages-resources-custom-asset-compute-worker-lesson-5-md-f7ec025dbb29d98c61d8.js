(self.webpackChunkproject_firefly=self.webpackChunkproject_firefly||[]).push([[3330],{3580:function(e,t,a){"use strict";a.r(t),a.d(t,{_frontmatter:function(){return s},default:function(){return l}});var p=a(22122),r=a(19756),i=(a(15007),a(64983)),o=a(99536),n=["components"],s={},d={_frontmatter:s},f=o.Z;function l(e){var t=e.components,a=(0,r.Z)(e,n);return(0,i.mdx)(f,(0,p.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"setup-aem-to-use-the-worker"},"Setup AEM to use the worker"),(0,i.mdx)("p",null,"Go to your ",(0,i.mdx)("strong",{parentName:"p"},"AEM Cloud")," instance and open ",(0,i.mdx)("strong",{parentName:"p"},"Tools -> Assets -> Processing Profiles")," and then create a new processing profile, e.g. ",(0,i.mdx)("inlineCode",{parentName:"p"},"My Worker test profile"),".\nOn the ",(0,i.mdx)("strong",{parentName:"p"},"Custom")," tab, configure your renditions to use your worker, as shown below."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"21.875%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/cf960edddb585dfec49b32bffcbbc274/cb523/processing-profile-1800.webp 320w","/project-firefly/static/cf960edddb585dfec49b32bffcbbc274/797b9/processing-profile-1800.webp 640w","/project-firefly/static/cf960edddb585dfec49b32bffcbbc274/4b075/processing-profile-1800.webp 1280w","/project-firefly/static/cf960edddb585dfec49b32bffcbbc274/a2303/processing-profile-1800.webp 1800w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/cf960edddb585dfec49b32bffcbbc274/72799/processing-profile-1800.png 320w","/project-firefly/static/cf960edddb585dfec49b32bffcbbc274/6af66/processing-profile-1800.png 640w","/project-firefly/static/cf960edddb585dfec49b32bffcbbc274/21b4d/processing-profile-1800.png 1280w","/project-firefly/static/cf960edddb585dfec49b32bffcbbc274/d61c2/processing-profile-1800.png 1800w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/cf960edddb585dfec49b32bffcbbc274/21b4d/processing-profile-1800.png",alt:"Config of custom renditions",title:"Config of custom renditions",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,"I configured 3 renditions using following imgix configuration params (we don't need to escape JSON if it's used in AEM)"),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Crop an image to 300x300 px around faces if detected, or around busy sections of the image (entropy)."),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "fit": "crop",\n  "crop": "faces,entropy",\n  "w": 300,\n  "h": 300\n}\n'))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"Same as the previous, but additionally apply an ellipse mask around the cropped area."),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "fit": "crop",\n  "crop": "faces,entropy",\n  "w": 300,\n  "h": 300,\n  "fm": "png",\n  "mask": "ellipse"\n}\n'))),(0,i.mdx)("li",{parentName:"ol"},(0,i.mdx)("p",{parentName:"li"},"The last one is similar to the first, but this time we add a text watermark to the image."),(0,i.mdx)("pre",{parentName:"li"},(0,i.mdx)("code",{parentName:"pre",className:"language-json"},'{\n  "h": 300,\n  "w": 300,\n  "fit": "crop",\n  "crop": "faces,entropy",\n  "mark": "https://assets.imgix.net/~text?w=200&txt-color=fff&txt=Hello+world&txt-size=16&txt-lead=0&txt-pad=15&bg=80002228&txt-font=Avenir-Heavy"\n}\n')))),(0,i.mdx)("p",null,"As the last step, you need to apply the profile to DAM folder."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"22.1875%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/cb523/apply-profile-to-folder.webp 320w","/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/797b9/apply-profile-to-folder.webp 640w","/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/4b075/apply-profile-to-folder.webp 1280w","/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/f3ff0/apply-profile-to-folder.webp 1920w","/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/a662b/apply-profile-to-folder.webp 2560w","/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/57c94/apply-profile-to-folder.webp 2732w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/72799/apply-profile-to-folder.png 320w","/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/6af66/apply-profile-to-folder.png 640w","/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/21b4d/apply-profile-to-folder.png 1280w","/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/29114/apply-profile-to-folder.png 1920w","/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/c2d13/apply-profile-to-folder.png 2560w","/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/8aace/apply-profile-to-folder.png 2732w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/abd35ababaf38ada3b37739e2d6dbdf2/21b4d/apply-profile-to-folder.png",alt:"Apply Profile to Folder",title:"Apply Profile to Folder",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("p",null,"Now you can upload images to the folder and observe results on the asset details page."),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"44.99999999999999%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/1550412ef2fdd2fbdec2186409941067/cb523/worker-results.webp 320w","/project-firefly/static/1550412ef2fdd2fbdec2186409941067/797b9/worker-results.webp 640w","/project-firefly/static/1550412ef2fdd2fbdec2186409941067/4b075/worker-results.webp 1280w","/project-firefly/static/1550412ef2fdd2fbdec2186409941067/a2303/worker-results.webp 1800w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/1550412ef2fdd2fbdec2186409941067/72799/worker-results.png 320w","/project-firefly/static/1550412ef2fdd2fbdec2186409941067/6af66/worker-results.png 640w","/project-firefly/static/1550412ef2fdd2fbdec2186409941067/21b4d/worker-results.png 1280w","/project-firefly/static/1550412ef2fdd2fbdec2186409941067/d61c2/worker-results.png 1800w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/1550412ef2fdd2fbdec2186409941067/21b4d/worker-results.png",alt:"Renditions list in Asset view",title:"Renditions list in Asset view",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")," "),(0,i.mdx)("p",null,(0,i.mdx)("em",{parentName:"p"},"Photo by ",(0,i.mdx)("a",{parentName:"em",href:"https://unsplash.com/@linkedinsalesnavigator?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"},"LinkedIn Sales Navigator")," on ",(0,i.mdx)("a",{parentName:"em",href:"https://unsplash.com/s/photos/women-sitting?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"},"Unsplash"))," "))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-resources-custom-asset-compute-worker-lesson-5-md-f7ec025dbb29d98c61d8.js.map