{"version":3,"sources":["webpack://project-firefly/./src/pages/guides/tips_tricks.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"8QAQaA,EAAe,GACtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGX,IAFFC,EAEC,EAFDA,WACGC,GACF,YACD,OAAO,SAACJ,GAAD,UAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,uDADR,wDAGA,yQACA,eACE,GAAM,0BADR,2BAGA,8cACA,mEAAoD,uBAAYC,WAAW,KAAvB,iBAApD,kJAA+P,uBAAYA,WAAW,KAAvB,mBAA/P,QAAkU,uBAAYA,WAAW,KAAvB,oBAAlU,iEACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,uBADZ,+MAYL,+IAAgI,uBAAYA,WAAW,KAAvB,iBAAhI,oDACA,eACE,GAAM,oCADR,qCAGA,uCAAwB,cAAGA,WAAW,IAClC,KAAQ,0HADY,+BAAxB,mOAE2Q,cAAGA,WAAW,IACrR,KAAQ,0CAD+P,6BAF3Q,uBAI6D,cAAGA,WAAW,IACvE,KAAQ,6EADiD,6CAJ7D,aAMmE,cAAGA,WAAW,IAC7E,KAAQ,0FADuD,gCANnE,mBAQ4D,cAAGA,WAAW,IACtE,KAAQ,gEADgD,0BAR5D,oFAWA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,uBADZ,2XAkBTJ,EAAWK,gBAAiB","file":"component---src-pages-guides-tips-tricks-md-e5f748c4c3b5edb5d49c.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/project-firefly/project-firefly/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"tips-and-tricks-for-optimizing-project-firefly-apps\"\n    }}>{`Tips and Tricks for optimizing Project Firefly Apps`}</h1>\n    <p>{`There are many areas in a web app where you could optimize the way it works, such as security, performance, and operational cost, to name a few. Here are some tips and tricks to help you gain the most out of your Project Firefly applications.`}</p>\n    <h2 {...{\n      \"id\": \"caching-http-responses\"\n    }}>{`Caching HTTP Responses`}</h2>\n    <p>{`This method works extremely well if your action returns some results based on repeated user inputs as query params, e.g. details about an item on a webshop, or visualization of static data. In these cases, your backend action would be invoked once only, and then subsequent requests receive the results directly from the  cache by the expiry time. Serving results from cache is not only fast, but also saves the cost of action invocations.`}</p>\n    <p>{`In order to configure the cache, you use the `}<inlineCode parentName=\"p\">{`Cache-Control`}</inlineCode>{` directive. Below is an example of an action that sets the cache with a TTL of 30 minutes. In the response object you will find an entry with `}<inlineCode parentName=\"p\">{`X-GW-Cache: HIT`}</inlineCode>{` or `}<inlineCode parentName=\"p\">{`X-GW-Cache: MISS`}</inlineCode>{` (depending on the answer being returned from cache or not).`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`async function main (params) {\n  return {\n      headers: {\n        'Cache-Control': 'max-age=1800'\n      },\n      statusCode: 200,\n      body: { message: 'I am cached for 30 minutes.' }\n  }\n}\n`}</code></pre>\n    <p>{`When you test this functionality for web action using Postman or web browser with developer tools opened, make sure that `}<inlineCode parentName=\"p\">{`Cache-Control`}</inlineCode>{` is not automatically set for all the requests.`}</p>\n    <h2 {...{\n      \"id\": \"returning-large-response-payload\"\n    }}>{`Returning Large Response Payload`}</h2>\n    <p>{`You can return a `}<a parentName=\"p\" {...{\n        \"href\": \"/project-firefly/apis/experienceplatform/runtime/docs.html#!adobedocs/adobeio-runtime/master/guides/system_settings.md\"\n      }}>{`response payload of max 1MB`}</a>{` in an Adobe I/O Runtime action. That is more than enough for the majority of the use cases we have seen so far. However, if your action would return a larger payload than the 1MB limit, we provide a scalable solution with `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/adobe/aio-lib-files\"\n      }}>{`Project Firefly Files SDK`}</a>{`. It allows you to `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/adobe/aio-lib-files/blob/master/doc/api.md#Files+write\"\n      }}>{`persist a binary file to the blob storage`}</a>{`, obtain `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/adobe/aio-lib-files/blob/master/doc/api.md#Files+generatePresignURL\"\n      }}>{`a temporary downloadable URL`}</a>{` and return an `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302\"\n      }}>{`HTTP Redirect response`}</a>{` to the file with this URL. Below is a simple code snippet to demonstrate that.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`const fileLocation = '/private-dir/large-image.png'\nconst files = await Files.init()\nawait files.write(fileLocation, fileContent)\n\n// Generate a presigned URL of the file that is valid for 60 seconds only\nconst presignUrl = await files.generatePresignURL(fileLocation, { expiryInSeconds: 60 })\n\nreturn {\n  headers: { location: presignUrl }, \n  statusCode: 302\n}\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}