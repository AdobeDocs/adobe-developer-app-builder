"use strict";(self.webpackChunkadobe_developer_app_builder=self.webpackChunkadobe_developer_app_builder||[]).push([[9276],{73198:function(e,t,r){r.r(t),r.d(t,{_frontmatter:function(){return p},default:function(){return d}});var a=r(58168),o=r(80045),i=(r(88763),r(15680)),n=r(83407);const s=["components"],p={},m={_frontmatter:p},c=n.A;function d(e){let{components:t}=e,r=(0,o.A)(e,s);return(0,i.mdx)(c,(0,a.A)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"architecture-of-our-worker"},"Architecture of our Worker"),(0,i.mdx)("p",null,"We're going to build a custom worker for Asset Compute service that will produce renditions using the ",(0,i.mdx)("strong",{parentName:"p"},(0,i.mdx)("a",{parentName:"strong",href:"https://www.imgix.com/"},"imgIX"))," service."),(0,i.mdx)("p",null,(0,i.mdx)("strong",{parentName:"p"},"imgIX")," is a powerful image processing service composed of three layers:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"imgIX CDN to cache and deliver rendered images"),(0,i.mdx)("li",{parentName:"ul"},"imgIX rendering cluster where all the magic happens"),(0,i.mdx)("li",{parentName:"ul"},"The source where your source images are hosted, and from which a rendering cluster initially pulls\nthe image. In our case, it will be Azure blob storage.")),(0,i.mdx)("p",null,"The service architecture suggests that it's mainly built to provide a layer delivering transformed and optimized assets\ndirectly to your website via the dedicated domain. However, for the sake of this article, we will use it differently -\nour worker will fetch the rendered images from imgIX and transfer them to the AEM storage, instead of serving them\ndirectly from imgIX CDN on the website."),(0,i.mdx)("p",null,"A conceptual diagram of data flow for our solution looks like this:"),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"627px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"61.24999999999999%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/app-builder/static/1d2b142180f3c3d492518efe85987b0e/5530d/custom-worker-concept.webp 320w","/app-builder/static/1d2b142180f3c3d492518efe85987b0e/faefd/custom-worker-concept.webp 627w"],sizes:"(max-width: 627px) 100vw, 627px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/app-builder/static/1d2b142180f3c3d492518efe85987b0e/8980b/custom-worker-concept.jpg 320w","/app-builder/static/1d2b142180f3c3d492518efe85987b0e/8767c/custom-worker-concept.jpg 627w"],sizes:"(max-width: 627px) 100vw, 627px",type:"image/jpeg"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/app-builder/static/1d2b142180f3c3d492518efe85987b0e/8767c/custom-worker-concept.jpg",alt:"Custom worker conceptual architecture",title:"Custom worker conceptual architecture",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"On each processing job, our worker first transfers the source image from AEM binaries cloud storage to the Azure blob\nstorage being a source of assets at imgIX."),(0,i.mdx)("li",{parentName:"ul"},"Once it's done, the worker generates a URL to the imgIX. The URL holds the parameters for transforming the image.\nThese parameters come from the processing job and are provided by the AEM user while configuring what renditions to\ngenerate."),(0,i.mdx)("li",{parentName:"ul"},"The last thing it does is to download the asset from the generated URL and upload it back to the AEM binaries cloud\nstorage.")))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-resources-custom-asset-compute-worker-our-worker-md-041c0b24b6c2b315d4d5.js.map