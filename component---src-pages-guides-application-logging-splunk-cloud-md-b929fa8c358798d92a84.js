(self.webpackChunkproject_firefly=self.webpackChunkproject_firefly||[]).push([[8613],{62678:function(e,n,t){"use strict";t.r(n),t.d(n,{_frontmatter:function(){return m},default:function(){return u}});var o=t(22122),a=t(19756),r=(t(15007),t(64983)),l=t(99536),p=["components"],m={},i={_frontmatter:m},d=l.Z;function u(e){var n=e.components,t=(0,a.Z)(e,p);return(0,r.mdx)(d,(0,o.Z)({},i,t,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"forwarding-logs-to-splunk-cloud"},"Forwarding logs to Splunk Cloud"),(0,r.mdx)("p",null,"This guide would cover configuring your app builder application to forward application logs to your Splunk Cloud account."),(0,r.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},"An index on your Splunk Cloud account. To create a new index, you can follow Splunk's guide ",(0,r.mdx)("a",{parentName:"li",href:"https://docs.splunk.com/Documentation/Splunk/8.2.4/Indexer/Setupmultipleindexes"},"here"),"."),(0,r.mdx)("li",{parentName:"ol"},"Local development setup for your App Builder application."),(0,r.mdx)("li",{parentName:"ol"},"The latest version of AIO CLI. Check your version by running ",(0,r.mdx)("inlineCode",{parentName:"li"},"aio --version"),". To update run ",(0,r.mdx)("inlineCode",{parentName:"li"},"npm install -g @adobe/aio-cli"),".")),(0,r.mdx)("h2",{id:"steps-to-configure-log-forwarding"},"Steps to configure Log Forwarding"),(0,r.mdx)("h3",{id:"1-set-up-splunk-http-event-collector"},"1. Set up Splunk HTTP Event Collector"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Go to your Splunk Cloud account home and select ",(0,r.mdx)("em",{parentName:"p"},"Settings")," from the ribbon on top. On the ",(0,r.mdx)("em",{parentName:"p"},"Settings")," pane, select ",(0,r.mdx)("em",{parentName:"p"},"Data Inputs"),".")),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Click on the ",(0,r.mdx)("strong",{parentName:"p"},(0,r.mdx)("em",{parentName:"strong"},"+ Add New"))," button corresponding to the HTTP Event Collector input type.")),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"On the ",(0,r.mdx)("em",{parentName:"p"},"Select Source")," screen:"),(0,r.mdx)("ol",{parentName:"li"},(0,r.mdx)("li",{parentName:"ol"},"Type in an input name. For example: ",(0,r.mdx)("inlineCode",{parentName:"li"},"My App Builder Application")," "),(0,r.mdx)("li",{parentName:"ol"},"Ensure that the ",(0,r.mdx)("em",{parentName:"li"},"Enable Indexer Acknowledgment")," checkbox is ",(0,r.mdx)("strong",{parentName:"li"},"not")," ticked."),(0,r.mdx)("li",{parentName:"ol"},"Click the ",(0,r.mdx)("em",{parentName:"li"},"Next")," button on top."))),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"On the ",(0,r.mdx)("em",{parentName:"p"},"Input Settings")," screen:"),(0,r.mdx)("ol",{parentName:"li"},(0,r.mdx)("li",{parentName:"ol"},"Set the source type to ",(0,r.mdx)("inlineCode",{parentName:"li"},"automatic"),". The forwarded logs would be sent with the ",(0,r.mdx)("inlineCode",{parentName:"li"},"sourcetype")," field set to ",(0,r.mdx)("inlineCode",{parentName:"li"},"_json"),"."),(0,r.mdx)("li",{parentName:"ol"},"From the list of indexes, only select the index on which you wish to receive logs from your App Builder application. "),(0,r.mdx)("li",{parentName:"ol"},"Click the ",(0,r.mdx)("em",{parentName:"li"},"Review")," button on top."))),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"On the ",(0,r.mdx)("em",{parentName:"p"},"Done")," screen:"),(0,r.mdx)("ol",{parentName:"li"},(0,r.mdx)("li",{parentName:"ol"},"Copy the value of the token value to be used later.")))),(0,r.mdx)("h3",{id:"2-getting-splunk-host-and-port"},"2. Getting Splunk Host and Port"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"To find out your ",(0,r.mdx)("inlineCode",{parentName:"p"},"hostname")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"port")," number, read the ",(0,r.mdx)("strong",{parentName:"p"},(0,r.mdx)("em",{parentName:"strong"},"Send data to HTTP Event Collector on Splunk Cloud Platform"))," section on Splunk's documentation ",(0,r.mdx)("a",{parentName:"p",href:"https://docs.splunk.com/Documentation/Splunk/8.2.4/Data/UsetheHTTPEventCollector#Send_data_to_HTTP_Event_Collector_on_Splunk_Cloud_Platform"},"here"),". ")),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Confirm whether you have got the correct ",(0,r.mdx)("inlineCode",{parentName:"p"},"hostname")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"port")," number by executing the following cURL request. If you get a ",(0,r.mdx)("inlineCode",{parentName:"p"},"200 OK")," response, you are good to proceed."))),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},'curl -X POST \'https://<hostname>:<port>/services/collector\' \\     \n-H "Authorization: Splunk <token>" \\\n-d \'{"event": "hello world"}\'\n')),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Note: The ",(0,r.mdx)("inlineCode",{parentName:"em"},"token")," value is from step 1.5.1")),(0,r.mdx)("h3",{id:"3-set-up-log-forwarding-in-app-builder"},"3. Set up Log Forwarding in App Builder"),(0,r.mdx)("ol",null,(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Open terminal and navigate to the App Builder project directory on your machine.")),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Run the following command and supply the values from previous steps"))),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"aio app config set log-forwarding\n? select log forwarding destination: Splunk HEC\n? host: <hostname>\n? port: <port_number>\n? index: <index>\n? hec_token: <token>\n")),(0,r.mdx)("p",null,"Note:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Make sure to not prefix the protocol (",(0,r.mdx)("inlineCode",{parentName:"li"},"http://")," or ",(0,r.mdx)("inlineCode",{parentName:"li"},"https://"),") before the hostname."),(0,r.mdx)("li",{parentName:"ul"},"Replace the value of ",(0,r.mdx)("inlineCode",{parentName:"li"},"hostname")," and ",(0,r.mdx)("inlineCode",{parentName:"li"},"port")," as ascertained in step 2.2.1. "),(0,r.mdx)("li",{parentName:"ul"},"Replace the value of ",(0,r.mdx)("inlineCode",{parentName:"li"},"token"),"  from step 1.5.1.")),(0,r.mdx)("ol",{start:3},(0,r.mdx)("li",{parentName:"ol"},"Verify that the config change has taken effect ")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"aio app config get log-forwarding\n")),(0,r.mdx)("ol",{start:4},(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Execute an action in your runtime namespace to generate logs.")),(0,r.mdx)("li",{parentName:"ol"},(0,r.mdx)("p",{parentName:"li"},"Go to Splunk Home > Search and run the query "))),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"index=<index>\n")),(0,r.mdx)("ol",{start:6},(0,r.mdx)("li",{parentName:"ol"},"If you don't see any logs in Splunk, please check the log forwarding errors.")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre"},"aio app config get log-forwarding errors\n")),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Note: Please post on our ",(0,r.mdx)("a",{parentName:"em",href:"https://experienceleaguecommunities.adobe.com/t5/project-firefly/ct-p/project-firefly"},"App Builder forums")," to get support if you are unable to setup log forwarding correctly.")))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-application-logging-splunk-cloud-md-b929fa8c358798d92a84.js.map