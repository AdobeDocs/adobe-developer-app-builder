(self.webpackChunkproject_firefly=self.webpackChunkproject_firefly||[]).push([[8079],{52456:function(e,a,p){"use strict";p.r(a),p.d(a,{_frontmatter:function(){return s},default:function(){return c}});var t=p(22122),i=p(19756),n=(p(15007),p(64983)),o=p(99536),l=["components"],s={},d={_frontmatter:s},r=o.Z;function c(e){var a=e.components,p=(0,i.Z)(e,l);return(0,n.mdx)(r,(0,t.Z)({},d,p,{components:a,mdxType:"MDXLayout"}),(0,n.mdx)("h1",{id:"project-firefly-application-tooling-lifecycle-event-hooks"},"Project Firefly application tooling lifecycle event hooks"),(0,n.mdx)("p",null,"Project Firefly applications created with ",(0,n.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli"},"our CLI")," are inherently npm packages.\nThis means they support many of the npm conveniences node developers expect. ",(0,n.mdx)("inlineCode",{parentName:"p"},"package.json")," may include the following scripts which are triggered at various times while an app is being built, deployed and/or run."),(0,n.mdx)("h2",{id:"sample-hooks-configuration"},"Sample hooks configuration"),(0,n.mdx)("p",null,"For example, pre and post hooks can be defined for the ",(0,n.mdx)("inlineCode",{parentName:"p"},"run"),", ",(0,n.mdx)("inlineCode",{parentName:"p"},"build")," and ",(0,n.mdx)("inlineCode",{parentName:"p"},"deploy")," commands in the package.json file of your app. For the ",(0,n.mdx)("inlineCode",{parentName:"p"},"run"),", ",(0,n.mdx)("inlineCode",{parentName:"p"},"build")," and ",(0,n.mdx)("inlineCode",{parentName:"p"},"deploy")," commands, you can specify build and deploy script substitutes as well. For the ",(0,n.mdx)("inlineCode",{parentName:"p"},"run")," command, you can specify an additional ",(0,n.mdx)("inlineCode",{parentName:"p"},"serve-static")," script (to custom serve your web assets)."),(0,n.mdx)("p",null,(0,n.mdx)("inlineCode",{parentName:"p"},"aio app run")," supports:"),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-json"},'  "scripts": {\n    "pre-app-run": "echo pre-app-run",\n    "post-app-run": "echo post-app-run",\n    "pre-app-build": "echo pre-app-build",\n    "post-app-build": "echo post-app-build",\n    "pre-app-deploy": "echo pre-app-deploy",\n    "post-app-deploy": "echo post-app-deploy",\n    "build-actions": "echo build-actions",\n    "deploy-actions": "echo deploy-actions",\n    "build-static": "echo build-static",\n    "serve-static": "echo serve-static",\n    "pre-app-undeploy": "echo pre-app-undeploy",\n    "post-app-undeploy": "echo post-app-undeploy",\n    "undeploy-actions": "echo undeploy-actions",\n    "undeploy-static": "echo undeploy-static"\n  }\n')),(0,n.mdx)("p",null,(0,n.mdx)("inlineCode",{parentName:"p"},"aio app build")," supports:"),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-json"},'  "scripts": {\n    "pre-app-build": "echo pre-app-build",\n    "post-app-build": "echo post-app-build",\n    "build-actions": "echo build-actions",\n    "build-static": "echo build-static"\n  }\n')),(0,n.mdx)("p",null,(0,n.mdx)("inlineCode",{parentName:"p"},"aio app deploy")," supports:"),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-json"},'  "scripts": {\n    "pre-app-build": "echo pre-app-build",\n    "post-app-build": "echo post-app-build",\n    "pre-app-deploy": "echo pre-app-deploy",\n    "post-app-deploy": "echo post-app-deploy",\n    "build-actions": "echo build-actions",\n    "build-static": "echo build-static",\n    "deploy-actions": "echo deploy-actions",\n    "deploy-static": "echo deploy-static"\n  }\n')),(0,n.mdx)("p",null,(0,n.mdx)("inlineCode",{parentName:"p"},"aio app undeploy")," supports:"),(0,n.mdx)("pre",null,(0,n.mdx)("code",{parentName:"pre",className:"language-json"},'  "scripts": {\n    "pre-app-undeploy": "echo pre-app-undeploy",\n    "post-app-undeploy": "echo post-app-undeploy",\n    "undeploy-actions": "echo undeploy-actions",\n    "undeploy-static": "echo undeploy-static"\n  }\n')),(0,n.mdx)("h2",{id:"use-cases"},"Use cases"),(0,n.mdx)("p",null,(0,n.mdx)("inlineCode",{parentName:"p"},"aio app run")," hooks:"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},"manage additional local development tooling that is not managed by the out-of-the-box flow")),(0,n.mdx)("p",null,(0,n.mdx)("inlineCode",{parentName:"p"},"aio app build")," ",(0,n.mdx)("strong",{parentName:"p"},"build-static")," and ",(0,n.mdx)("strong",{parentName:"p"},"build-actions")," hooks:"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},"build actions to include static files with the action zipfile (for templates like in server-side rendering)"),(0,n.mdx)("li",{parentName:"ul"},"build the web assets with a different bundler and configuration, for example webpack")),(0,n.mdx)("p",null,(0,n.mdx)("inlineCode",{parentName:"p"},"aio app deploy")," ",(0,n.mdx)("strong",{parentName:"p"},"deploy-static")," and ",(0,n.mdx)("strong",{parentName:"p"},"deploy-actions")," hooks:"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},"support additional deployment steps (e.g. deploy to multiple servers or locations)")),(0,n.mdx)("p",null,(0,n.mdx)("inlineCode",{parentName:"p"},"aio app undeploy")," ",(0,n.mdx)("strong",{parentName:"p"},"undeploy-static")," and ",(0,n.mdx)("strong",{parentName:"p"},"undeploy-actions")," hooks:"),(0,n.mdx)("ul",null,(0,n.mdx)("li",{parentName:"ul"},"support additional un-deployment steps (e.g. un-deploy from multiple servers or locations)")),(0,n.mdx)("h2",{id:"hooks-flow"},"Hooks flow"),(0,n.mdx)("p",null,"The following diagram illustrates how your custom hooks will be executed within the application via the various commands:"),(0,n.mdx)("p",null,(0,n.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,n.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"145.31249999999997%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,n.mdx)("picture",{parentName:"span"},"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/75aeefdd9a99348b6e2c807e5cec617a/cb523/aio-app-run.webp 320w","/project-firefly/static/75aeefdd9a99348b6e2c807e5cec617a/797b9/aio-app-run.webp 640w","/project-firefly/static/75aeefdd9a99348b6e2c807e5cec617a/4b075/aio-app-run.webp 1280w","/project-firefly/static/75aeefdd9a99348b6e2c807e5cec617a/018aa/aio-app-run.webp 1835w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/75aeefdd9a99348b6e2c807e5cec617a/72799/aio-app-run.png 320w","/project-firefly/static/75aeefdd9a99348b6e2c807e5cec617a/6af66/aio-app-run.png 640w","/project-firefly/static/75aeefdd9a99348b6e2c807e5cec617a/21b4d/aio-app-run.png 1280w","/project-firefly/static/75aeefdd9a99348b6e2c807e5cec617a/dc94e/aio-app-run.png 1835w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,n.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/75aeefdd9a99348b6e2c807e5cec617a/21b4d/aio-app-run.png",alt:"aio-app-run lifecycle",title:"aio-app-run lifecycle",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,n.mdx)("p",null,(0,n.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1137px"}},"\n      ",(0,n.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"114.375%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,n.mdx)("picture",{parentName:"span"},"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/9a236cd53b6e754a095dfb7f5a029439/cb523/aio-app-build.webp 320w","/project-firefly/static/9a236cd53b6e754a095dfb7f5a029439/797b9/aio-app-build.webp 640w","/project-firefly/static/9a236cd53b6e754a095dfb7f5a029439/1631d/aio-app-build.webp 1137w"],sizes:"(max-width: 1137px) 100vw, 1137px",type:"image/webp"}),"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/9a236cd53b6e754a095dfb7f5a029439/72799/aio-app-build.png 320w","/project-firefly/static/9a236cd53b6e754a095dfb7f5a029439/6af66/aio-app-build.png 640w","/project-firefly/static/9a236cd53b6e754a095dfb7f5a029439/000c7/aio-app-build.png 1137w"],sizes:"(max-width: 1137px) 100vw, 1137px",type:"image/png"}),"\n          ",(0,n.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/9a236cd53b6e754a095dfb7f5a029439/000c7/aio-app-build.png",alt:"aio-app-build lifecycle",title:"aio-app-build lifecycle",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,n.mdx)("p",null,(0,n.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1137px"}},"\n      ",(0,n.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"205.93749999999997%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,n.mdx)("picture",{parentName:"span"},"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/4848a8859f8e15755094307efba4feb9/cb523/aio-app-deploy.webp 320w","/project-firefly/static/4848a8859f8e15755094307efba4feb9/797b9/aio-app-deploy.webp 640w","/project-firefly/static/4848a8859f8e15755094307efba4feb9/1631d/aio-app-deploy.webp 1137w"],sizes:"(max-width: 1137px) 100vw, 1137px",type:"image/webp"}),"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/4848a8859f8e15755094307efba4feb9/72799/aio-app-deploy.png 320w","/project-firefly/static/4848a8859f8e15755094307efba4feb9/6af66/aio-app-deploy.png 640w","/project-firefly/static/4848a8859f8e15755094307efba4feb9/000c7/aio-app-deploy.png 1137w"],sizes:"(max-width: 1137px) 100vw, 1137px",type:"image/png"}),"\n          ",(0,n.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/4848a8859f8e15755094307efba4feb9/000c7/aio-app-deploy.png",alt:"aio-app-deploy lifecycle",title:"aio-app-deploy lifecycle",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,n.mdx)("p",null,(0,n.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,n.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"100%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,n.mdx)("picture",{parentName:"span"},"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/c1728d5107fedc903550684ee7128c39/cb523/aio-app-undeploy.webp 320w","/project-firefly/static/c1728d5107fedc903550684ee7128c39/797b9/aio-app-undeploy.webp 640w","/project-firefly/static/c1728d5107fedc903550684ee7128c39/4b075/aio-app-undeploy.webp 1280w","/project-firefly/static/c1728d5107fedc903550684ee7128c39/4dbb0/aio-app-undeploy.webp 1302w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,n.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/c1728d5107fedc903550684ee7128c39/72799/aio-app-undeploy.png 320w","/project-firefly/static/c1728d5107fedc903550684ee7128c39/6af66/aio-app-undeploy.png 640w","/project-firefly/static/c1728d5107fedc903550684ee7128c39/21b4d/aio-app-undeploy.png 1280w","/project-firefly/static/c1728d5107fedc903550684ee7128c39/5f652/aio-app-undeploy.png 1302w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,n.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/c1728d5107fedc903550684ee7128c39/21b4d/aio-app-undeploy.png",alt:"aio-app-undeploy lifecycle",title:"aio-app-undeploy lifecycle",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,n.mdx)("h1",{id:"npm-script-hooks"},"npm script hooks"),(0,n.mdx)("p",null,"Use of Project Firefly event hooks does not interfere with use of npm scripts, however you will need to use ",(0,n.mdx)("inlineCode",{parentName:"p"},"npm run ..")," to trigger them.\nThe only ",(0,n.mdx)("em",{parentName:"p"},"default")," script that Firefly tooling calls is ",(0,n.mdx)("inlineCode",{parentName:"p"},"test"),"\n",(0,n.mdx)("inlineCode",{parentName:"p"},"aio app test -> npm test"),", and in turn, npm calls ",(0,n.mdx)("inlineCode",{parentName:"p"},"pretest")," and ",(0,n.mdx)("inlineCode",{parentName:"p"},"posttest")," around your actual test script."),(0,n.mdx)("p",null,(0,n.mdx)("a",{parentName:"p",href:"https://docs.npmjs.com/misc/scripts"},'How npm handles the "scripts" field')))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-app-hooks-md-b595be8b0651fd50c66c.js.map