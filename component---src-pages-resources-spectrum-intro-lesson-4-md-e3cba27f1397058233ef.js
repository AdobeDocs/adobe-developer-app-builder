(self.webpackChunkproject_firefly=self.webpackChunkproject_firefly||[]).push([[5598],{81914:function(e,t,a){"use strict";a.r(t),a.d(t,{_frontmatter:function(){return d},default:function(){return m}});var n=a(22122),i=a(19756),l=(a(15007),a(64983)),r=a(99536),p=["components"],d={},s={_frontmatter:d},o=r.Z;function m(e){var t=e.components,a=(0,i.Z)(e,p);return(0,l.mdx)(o,(0,n.Z)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"lesson-4-react-spectrum-in-project-firefly"},"Lesson 4: React Spectrum in Project Firefly"),(0,l.mdx)("p",null,"To initialize a Firefly app, let’s use the init command from the ",(0,l.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli"},"CLI"),"."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-bash"},"aio app init my-app\n")),(0,l.mdx)("p",null,"You’re presented with a few options what you want your app to include (serverless actions, web UI assets, CI/CD pipeline).\nIn this lab, we're only interested in ",(0,l.mdx)("inlineCode",{parentName:"p"},"Web Assets: Deploy hosted static assets"),"."),(0,l.mdx)("p",null,(0,l.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1068px"}},"\n      ",(0,l.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"27.187499999999996%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,l.mdx)("picture",{parentName:"span"},"\n          ",(0,l.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/0df0d38124f5e52d615f8b0d5b5f7e4e/cb523/web-assets.webp 320w","/project-firefly/static/0df0d38124f5e52d615f8b0d5b5f7e4e/797b9/web-assets.webp 640w","/project-firefly/static/0df0d38124f5e52d615f8b0d5b5f7e4e/80a15/web-assets.webp 1068w"],sizes:"(max-width: 1068px) 100vw, 1068px",type:"image/webp"}),"\n          ",(0,l.mdx)("source",{parentName:"picture",srcSet:["/project-firefly/static/0df0d38124f5e52d615f8b0d5b5f7e4e/72799/web-assets.png 320w","/project-firefly/static/0df0d38124f5e52d615f8b0d5b5f7e4e/6af66/web-assets.png 640w","/project-firefly/static/0df0d38124f5e52d615f8b0d5b5f7e4e/d53ff/web-assets.png 1068w"],sizes:"(max-width: 1068px) 100vw, 1068px",type:"image/png"}),"\n          ",(0,l.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/project-firefly/static/0df0d38124f5e52d615f8b0d5b5f7e4e/d53ff/web-assets.png",alt:"web-assets",title:"web-assets",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,l.mdx)("h2",{id:"single-page-application"},"Single Page Application"),(0,l.mdx)("p",null,"This will generate a Single Page Application project using ",(0,l.mdx)("a",{parentName:"p",href:"https://reactjs.org/"},"React")," and ",(0,l.mdx)("a",{parentName:"p",href:"../../guides/exc_app/index.md"},"Experience Cloud Shell")," utilities to integrate the SPA within the Adobe Experience Cloud.\nHow to best leverage the Experience Shell (e.g routing etc.) will be covered in another codelab."),(0,l.mdx)("p",null,"Project Firefly SPAs are following ",(0,l.mdx)("a",{parentName:"p",href:"https://jamstack.org/"},"JAMstack principles"),' "Fast and secure apps delivered by pre-rendering files and serving them directly from a Content Delivery Network". '),(0,l.mdx)("p",null,(0,l.mdx)("em",{parentName:"p"},"The SPA is using client-side rendering. Server side rendering or isomorphic rendering to build views on the server at runtime is not supported.")),(0,l.mdx)("h2",{id:"project-structure"},"Project Structure"),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"web-src")," folder holds the source files of the React App including:"),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},"The Adobe Experience Cloud Shell runtime object containing Identity Management System information e.g. to retrieve the user token"),(0,l.mdx)("li",{parentName:"ul"},"A pre-defined 404 error handling page"),(0,l.mdx)("li",{parentName:"ul"},"A sample React App using React Spectrum components")),(0,l.mdx)("p",null,"In ",(0,l.mdx)("inlineCode",{parentName:"p"},"package.json"),", you define your app name, version and all dependencies that will be bundled when deploying the SPA.\nThe React Spectrum components used in the sample React App are listed as dependencies e.g ",(0,l.mdx)("inlineCode",{parentName:"p"},"@react-spectrum/button")," or ",(0,l.mdx)("inlineCode",{parentName:"p"},"@react-spectrum/layout"),"."),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"test")," folder includes a simple test file using the JavaScript Testing Framework ",(0,l.mdx)("a",{parentName:"p",href:"https://jestjs.io/"},"Jest"),"."),(0,l.mdx)("p",null,"To deploy the SPA into Adobe's CDN, you'll have to specify your namespace and credentials in the ",(0,l.mdx)("inlineCode",{parentName:"p"},".env")," file, namely ",(0,l.mdx)("inlineCode",{parentName:"p"},"AIO_RUNTIME_NAMESPACE")," and ",(0,l.mdx)("inlineCode",{parentName:"p"},"AIO_RUNTIME_AUTH"),"."),(0,l.mdx)("h2",{id:"running-and-deployment"},"Running and Deployment"),(0,l.mdx)("p",null,"You can run the Firefly SPA locally using the CLI command:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-bash"},"aio app run\n")),(0,l.mdx)("p",null,"This will:"),(0,l.mdx)("ol",null,(0,l.mdx)("li",{parentName:"ol"},"Bundle all static files (HTML, CSS, JS, assets etc.) using the built-in web application bundler ",(0,l.mdx)("a",{parentName:"li",href:"https://parceljs.org/"},"Parcel"),".  "),(0,l.mdx)("li",{parentName:"ol"},"Start a local development server on http://localhost:9080/. ")),(0,l.mdx)("p",null,"Thanks to the Experience Shell integration, you also preview the SPA directly on the Adobe Experience Cloud by going to ",(0,l.mdx)("a",{parentName:"p",href:"https://experience.adobe.com/?devMode=true#/apps/?localDevUrl=https://localhost:9080"},"https://experience.adobe.com/?devMode=true#/apps/?localDevUrl=https://localhost:9080")),(0,l.mdx)("p",null,"To deploy the web assets to the CDN, use: "),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-bash"},"aio app deploy\n")),(0,l.mdx)("p",null,"The CDN is provisioned on ",(0,l.mdx)("inlineCode",{parentName:"p"},"adobeio-static.net")," and the deployed Firefly SPA will be available at ",(0,l.mdx)("inlineCode",{parentName:"p"},"https://<namespace>.adobeio-static.net/<appname>-<appversion>/index.html"),"."),(0,l.mdx)("h2",{id:"caching"},"Caching"),(0,l.mdx)("p",null,"Content caching is defined via the HTTP the header ",(0,l.mdx)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control"},"Cache-Control")," and is measured in seconds."),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Resource type"),(0,l.mdx)("th",{parentName:"tr",align:null},"max-age"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"HTML"),(0,l.mdx)("td",{parentName:"tr",align:null},"60")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"CSS"),(0,l.mdx)("td",{parentName:"tr",align:null},"604800")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"JS"),(0,l.mdx)("td",{parentName:"tr",align:null},"604800")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},"Assets"),(0,l.mdx)("td",{parentName:"tr",align:null},"604800")))),(0,l.mdx)("p",null,"To summarize, HTML content is cached 1 min and the rest is cached 1 week."))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-resources-spectrum-intro-lesson-4-md-e3cba27f1397058233ef.js.map